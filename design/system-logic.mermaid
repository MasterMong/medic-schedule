graph TD
    %% 1. ระบบจัดการข้อมูลพื้นฐาน
    subgraph "1. ระบบจัดการข้อมูลพื้นฐาน"
        A1[รับข้อมูลผู้ป่วยใหม่] --> A2{ตรวจสอบ HN}
        A2 -->|มี HN| A3[อัพเดทข้อมูล]
        A2 -->|ไม่มี HN| A4[สร้าง HN ใหม่]
        A4 --> A5[บันทึกข้อมูลผู้ป่วย]
        A3 --> A5
        A5 --> A6[จัดสรรเตียง/ห้อง]
    end

    %% 2. ระบบจัดการตารางการให้ยา
    subgraph "2. ระบบจัดการตารางการให้ยา"
        B1[รับคำสั่งแพทย์] --> B2{ตรวจสอบการแพ้ยา}
        B2 -->|ไม่แพ้| B3[สร้างตารางการให้ยา]
        B2 -->|แพ้| B4[แจ้งเตือนแพทย์]
        B3 --> B5[จัดสรรพยาบาล]
        B5 --> B6[แจ้งเตือนพยาบาล]
    end

    %% 3. ระบบบริหารยา
    subgraph "3. ระบบบริหารยา"
        C1[สแกนรหัสผู้ป่วย] --> C2{ตรวจสอบ 7 Rights}
        C2 -->|ผ่าน| C3[ให้ยาผู้ป่วย]
        C2 -->|ไม่ผ่าน| C4[แจ้งเตือนตรวจสอบ]
        C3 --> C5[บันทึกการให้ยา]
        C5 --> C6[ติดตามอาการ]
    end

    %% 4. ระบบติดตามและแจ้งเตือน
    subgraph "4. ระบบติดตามและแจ้งเตือน"
        D1[ตรวจสอบตารางยา] --> D2{ใกล้เวลาให้ยา?}
        D2 -->|ใช่| D3[แจ้งเตือนพยาบาล]
        D2 -->|ไม่| D4[ตรวจสอบต่อ]
        D3 --> D5{ยาถูกให้ตรงเวลา?}
        D5 -->|ไม่| D6[แจ้งเตือนซ้ำ]
        D5 -->|ใช่| D7[บันทึกสถานะ]
    end

    %% 5. ระบบรายงาน
    subgraph "5. ระบบรายงาน"
        E1[รวบรวมข้อมูล] --> E2[วิเคราะห์ข้อมูล]
        E2 --> E3[สร้างรายงาน]
        E3 --> E4[แสดงผลแดชบอร์ด]
    end
<div class="divide-y">
    {% for schedule in schedules %}
    <div class="py-4 {% if schedule.is_due %}bg-yellow-50{% endif %}">
        <div class="flex justify-between items-start">
            <div>
                <h3 class="font-bold">{{ schedule.patient.name }}</h3>
                <p class="text-sm text-gray-600">
                    {{ schedule.medication.name }} {% if schedule.note %}- {{ schedule.note }}{% endif %}
                </p>
                <p class="text-sm text-gray-500">
                    ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà: ‡∏ß‡∏≠‡∏£‡πå‡∏î {{ schedule.patient.bed.room.ward.ward_name }}, 
                    ‡∏´‡πâ‡∏≠‡∏á {{ schedule.patient.bed.room.room_number }}, 
                    ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á {{ schedule.patient.bed.bed_number }}
                </p>
                <p class="text-sm">
                    ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤: {{ schedule.schedule_time.strftime("%H:%M") }}
                </p>
                {% if schedule.is_completed %}
                <p class="text-sm text-green-600">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</p>
                {% endif %}
            </div>
            <div class="space-x-2">
                {% if not schedule.is_completed %}
                    <button class="bg-blue-500 text-white px-3 py-1 rounded text-sm"
                            onclick="editSchedule('{{ schedule.schedule_id }}')">
                        ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                    </button>
                    <button hx-post="/api/schedules/{{ schedule.schedule_id }}/complete"
                            hx-swap="none"
                            hx-target="this"
                            class="bg-green-500 text-white px-3 py-1 rounded text-sm"
                            hx-on::after-request="if(event.detail.successful) { htmx.trigger('body', 'scheduleUpdated'); this.classList.add('opacity-50'); this.disabled = true; }">
                        ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                    </button>
                    <button class="bg-red-500 text-white px-3 py-1 rounded text-sm"
                            hx-delete="/api/schedules/{{ schedule.schedule_id }}"
                            hx-confirm="‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ?&#13;&#10;&#13;&#10;‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢: {{ schedule.patient.name }}&#13;&#10;‡∏¢‡∏≤: {{ schedule.medication.name }}&#13;&#10;‡πÄ‡∏ß‡∏•‡∏≤: {{ schedule.schedule_time.strftime('%H:%M') }}"
                            hx-target="#schedulesList">
                        üóëÔ∏è ‡∏•‡∏ö
                    </button>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>